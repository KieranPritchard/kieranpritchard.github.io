{% comment %}
    Responsive Bootstrap carousel include (FULL FIX)

    Usage:
    {% include carousel.html
        images=page.carousel_images
        carousel_id="unique-id"
        auto_advance=false %}

    Front matter:
    carousel_images:
        - src: "/assets/img/example1.jpg"
        alt: "Example image 1"
        - src: "/assets/img/example2.jpg"
        alt: "Example image 2"
{% endcomment %}

{% assign auto_advance = include.auto_advance | default: true %}

<div class="carousel-wrapper col-md order-md-1 order-first text-center">
    <div
        id="{{ include.carousel_id }}"
        class="carousel slide"
        {% if auto_advance %}
            data-bs-ride="carousel"
            data-bs-interval="5000"
        {% endif %}
    >
        {% if include.images.size > 1 %}
        <!-- Indicators -->
        <div class="carousel-indicators">
            {% for image in include.images %}
                <button
                    type="button"
                    data-bs-target="#{{ include.carousel_id }}"
                    data-bs-slide-to="{{ forloop.index0 }}"
                    {% if forloop.first %}class="active" aria-current="true"{% endif %}
                    aria-label="Slide {{ forloop.index }}">
                </button>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Slides -->
        <div class="carousel-inner">
            {% for image in include.images %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <img
                        class="img-fluid"
                        src="{{ image.src | relative_url }}"
                        alt="{{ image.alt | escape }}"
                        loading="lazy"
                    >
                </div>
            {% endfor %}
        </div>

        {% if include.images.size > 1 %}
        <!-- Controls -->
        <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#{{ include.carousel_id }}"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Previous</span>
        </button>

        <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#{{ include.carousel_id }}"
            data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Next</span>
        </button>
        {% endif %}
    </div>
</div>
